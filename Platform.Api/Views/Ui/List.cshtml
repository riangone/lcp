@using Platform.Infrastructure.Definitions
@model IEnumerable<Dictionary<string, object>>
@{
    var def = (ModelDefinition)ViewData["ModelDef"]!;
    var modelName = (string)ViewData["ModelName"]!;
    var currentLang = Context.Request.Query["lang"].FirstOrDefault() ?? ViewData["Lang"] as string ?? "en";

    var localizedLabels = currentLang == "zh"
        ? def.Ui?.Labels?.Zh
        : def.Ui?.Labels?.En;

    var title = localizedLabels != null && localizedLabels.ContainsKey("title")
        ? localizedLabels["title"]
        : modelName;

    ViewData["Title"] = $"{title} - Low Code Platform";
    ViewData["ActivePage"] = "Data";
}

<div id="list" class="container mx-auto px-4 py-8">
    @await Html.PartialAsync("_ListContent", Model)
</div>
