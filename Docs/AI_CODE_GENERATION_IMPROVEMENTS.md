# AI ä»£ç ç”Ÿæˆç³»ç»Ÿæ”¹è¿›æ€»ç»“

## ğŸ“‹ é—®é¢˜é™ˆè¿°

åŸé¡¹ç›®ä¸­çš„ AI ä»£ç ç”Ÿæˆå­˜åœ¨ä»¥ä¸‹é—®é¢˜ï¼š

1. **éšæœºæ€§ä»£ç ç”Ÿæˆ** - `MockAISuggestionService` ç”Ÿæˆéšæœºå»ºè®®ï¼Œæ¯æ¬¡è¿è¡Œç»“æœä¸åŒ
2. **ç¼ºå°‘æ¨¡æ¿ç³»ç»Ÿ** - æ²¡æœ‰å¯å¤ç”¨çš„ä»£ç æ¨¡æ¿ç¡®ä¿ä¸€è‡´æ€§
3. **ç¼ºå°‘ç‰ˆæœ¬ç®¡ç†** - æ²¡æœ‰ä»£ç å˜æ›´è¿½è¸ªå’Œå›æ»šæœºåˆ¶
4. **ç¼ºå°‘è´¨é‡éªŒè¯** - ç”Ÿæˆçš„ä»£ç æ²¡æœ‰ç»è¿‡ç³»ç»ŸéªŒè¯
5. **æ— æ³•ç»´æŠ¤** - ç”Ÿæˆçš„ä»£ç éš¾ä»¥è¿½è¸ªå’Œç»´æŠ¤

## âœ… è§£å†³æ–¹æ¡ˆ

åˆ›å»ºäº†ä¸€ä¸ªå®Œæ•´çš„**ç¡®å®šæ€§ä»£ç ç”Ÿæˆç³»ç»Ÿ**ï¼Œç¡®ä¿ AI ç”Ÿæˆçš„ä»£ç æ˜¯ï¼š
- **ç¨³å®šçš„** - ç›¸åŒè¾“å…¥å§‹ç»ˆäº§ç”Ÿç›¸åŒè¾“å‡º
- **ä¸€è‡´çš„** - ä½¿ç”¨æ¨¡æ¿ç¡®ä¿ä»£ç ç»“æ„ç»Ÿä¸€
- **å¯ç»´æŠ¤çš„** - æœ‰ç‰ˆæœ¬è¿½è¸ªå’Œè´¨é‡ä¿è¯

## ğŸ—ï¸ æ¶æ„è®¾è®¡

### æ ¸å¿ƒç»„ä»¶

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    CodeGenerationService                     â”‚
â”‚                      (ç»Ÿä¸€å…¥å£æœåŠ¡)                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                     â”‚                     â”‚
        â–¼                     â–¼                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ModelCodeGeneratorâ”‚ â”‚CodeVersionManagerâ”‚ â”‚CodeQualityValidatorâ”‚
â”‚   (ä»£ç ç”Ÿæˆå™¨)    â”‚ â”‚   (ç‰ˆæœ¬ç®¡ç†å™¨)    â”‚ â”‚   (è´¨é‡éªŒè¯å™¨)    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚                     â”‚                     â”‚
        â–¼                     â–¼                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ CodeTemplateEngineâ”‚ â”‚  versions.json   â”‚ â”‚  Basic Checks    â”‚
â”‚   (æ¨¡æ¿å¼•æ“)      â”‚ â”‚  (ç‰ˆæœ¬å­˜å‚¨)      â”‚ â”‚  (åŸºç¡€æ£€æŸ¥)      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æ–°å¢æ–‡ä»¶

| æ–‡ä»¶ | è¯´æ˜ |
|------|------|
| `Platform.Application/CodeGeneration/ICodeGenerator.cs` | ä»£ç ç”Ÿæˆå™¨æ¥å£ |
| `Platform.Application/CodeGeneration/CodeTemplateEngine.cs` | ä»£ç æ¨¡æ¿å¼•æ“ |
| `Platform.Application/CodeGeneration/ModelCodeGenerator.cs` | æ¨¡å‹ä»£ç ç”Ÿæˆå™¨ |
| `Platform.Application/CodeGeneration/CodeVersionManager.cs` | ä»£ç ç‰ˆæœ¬ç®¡ç†å™¨ |
| `Platform.Application/CodeGeneration/CodeQualityValidator.cs` | ä»£ç è´¨é‡éªŒè¯å™¨ |
| `Platform.Application/CodeGeneration/CodeGenerationService.cs` | ä»£ç ç”ŸæˆæœåŠ¡ |
| `Docs/CodeGeneration.md` | è¯¦ç»†ä½¿ç”¨æ–‡æ¡£ |

### ä¿®æ”¹æ–‡ä»¶

| æ–‡ä»¶ | ä¿®æ”¹å†…å®¹ |
|------|----------|
| `Platform.Application/Platform.Application.csproj` | æ·»åŠ  Microsoft.CodeAnalysis.CSharp å¼•ç”¨ |
| `QWEN.md` | æ·»åŠ  AI ä»£ç ç”Ÿæˆç³»ç»Ÿè¯´æ˜ |

## ğŸ¯ ä¸»è¦ç‰¹æ€§

### 1. æ¨¡æ¿é©±åŠ¨ç”Ÿæˆ

ä½¿ç”¨é¢„å®šä¹‰æ¨¡æ¿ç¡®ä¿ä»£ç ä¸€è‡´æ€§ï¼š

```csharp
// å†…ç½®æ¨¡æ¿
- ApiController  - API æ§åˆ¶å™¨æ¨¡æ¿
- Validator      - éªŒè¯å™¨æ¨¡æ¿
- Service        - æœåŠ¡å±‚æ¨¡æ¿
- UnitTest       - å•å…ƒæµ‹è¯•æ¨¡æ¿
```

### 2. ç‰ˆæœ¬ç®¡ç†

è¿½è¸ªæ¯æ¬¡ä»£ç ç”Ÿæˆï¼š

```csharp
// ç‰ˆæœ¬ä¿¡æ¯
- VersionId      - å”¯ä¸€ç‰ˆæœ¬æ ‡è¯†
- YamlHash       - YAML å®šä¹‰å“ˆå¸Œ
- GeneratedAt    - ç”Ÿæˆæ—¶é—´
- ContentHash    - ç”Ÿæˆå†…å®¹å“ˆå¸Œ
- ChangesFromPrevious - ä¸ä¸Šä¸€ç‰ˆæœ¬çš„å·®å¼‚
```

### 3. è´¨é‡éªŒè¯

è‡ªåŠ¨éªŒè¯ç”Ÿæˆä»£ç çš„è´¨é‡ï¼š

- âœ… è¯­æ³•æ£€æŸ¥ï¼ˆæ‹¬å·åŒ¹é…ã€namespace å£°æ˜ç­‰ï¼‰
- âœ… ä»£ç é£æ ¼ï¼ˆè¡Œé•¿åº¦ã€å°¾éšç©ºæ ¼ç­‰ï¼‰
- âœ… å‘½åè§„èŒƒï¼ˆPascalCaseã€camelCaseï¼‰
- âœ… æ–‡ä»¶é•¿åº¦æ£€æŸ¥

### 4. å˜æ›´æ£€æµ‹

åªåœ¨å¿…è¦æ—¶é‡æ–°ç”Ÿæˆï¼š

```csharp
// æ£€æµ‹æ¡ä»¶
- YAML å®šä¹‰æ˜¯å¦å˜æ›´
- ç”Ÿæˆå™¨ç‰ˆæœ¬æ˜¯å¦æ›´æ–°
- ç”Ÿæˆå†…å®¹æ˜¯å¦æœ‰å·®å¼‚
```

## ğŸš€ ä½¿ç”¨ç¤ºä¾‹

### åŸºæœ¬ä½¿ç”¨

```csharp
using Platform.Application.CodeGeneration;

// 1. åˆ›å»ºæœåŠ¡
var settings = new CodeGenerationSettings
{
    RootNamespace = "Platform.Api",
    AddHeaderComments = true
};

var service = new CodeGenerationService(settings);

// 2. ä» YAML ç”Ÿæˆä»£ç 
var result = await service.GenerateFromYamlAsync(
    yamlFilePath: "Definitions/app.yaml",
    outputDirectory: "Generated"
);

// 3. æ£€æŸ¥ç»“æœ
if (result.Success)
{
    Console.WriteLine($"ç”Ÿæˆå®Œæˆï¼Œè€—æ—¶ï¼š{result.Duration:F2}ç§’");
    foreach (var kvp in result.ModelResults)
    {
        Console.WriteLine($"  {kvp.Key}: è´¨é‡è¯„åˆ†={kvp.Value.QualityReport?.OverallScore:F1}");
    }
}
```

### ç‰ˆæœ¬ç®¡ç†

```csharp
// æŸ¥çœ‹ç‰ˆæœ¬å†å²
var versions = await service.GetVersionHistoryAsync("Artist");

// æ¯”è¾ƒç‰ˆæœ¬å·®å¼‚
var diff = await service.CompareVersionsAsync(
    "v20260219-120000-1234",
    "v20260219-140000-5678"
);

// å›æ»šåˆ°æŒ‡å®šç‰ˆæœ¬
await service.RollbackAsync("v20260219-120000-1234");
```

## ğŸ“Š ç¼–è¯‘çŠ¶æ€

```
Build succeeded with 15 Warning(s)
    15 Warning(s)
    0 Error(s)
```

æ‰€æœ‰æ–°å¢ä»£ç ç¼–è¯‘é€šè¿‡ï¼

## ğŸ”„ å·¥ä½œæµç¨‹

```
1. åŠ è½½ YAML å®šä¹‰
       â†“
2. è®¡ç®— YAML å“ˆå¸Œ
       â†“
3. æ£€æŸ¥æ˜¯å¦æœ‰å˜æ›´ â†’ æ— å˜æ›´ â†’ è·³è¿‡
       â†“ æœ‰å˜æ›´
4. ä½¿ç”¨æ¨¡æ¿ç”Ÿæˆä»£ç 
       â†“
5. è´¨é‡éªŒè¯ â†’ å¤±è´¥ â†’ æŠ¥é”™
       â†“ é€šè¿‡
6. å†™å…¥æ–‡ä»¶
       â†“
7. ä¿å­˜ç‰ˆæœ¬ä¿¡æ¯
       â†“
8. å®Œæˆ
```

## ğŸ“ é…ç½®é€‰é¡¹

### CodeGenerationSettings

| å±æ€§ | é»˜è®¤å€¼ | è¯´æ˜ |
|------|--------|------|
| `RootNamespace` | "Platform.Api" | æ ¹å‘½åç©ºé—´ |
| `VersionDirectory` | ".code_versions" | ç‰ˆæœ¬å­˜å‚¨ç›®å½• |
| `IndentSize` | 4 | ä»£ç ç¼©è¿›å¤§å° |
| `AddHeaderComments` | true | æ·»åŠ æ–‡ä»¶å¤´æ³¨é‡Š |
| `ForceRegenerate` | false | å¼ºåˆ¶é‡æ–°ç”Ÿæˆ |
| `FailOnQualityError` | false | è´¨é‡å¤±è´¥æ—¶åœæ­¢ |

### CodeQualityRules

| å±æ€§ | é»˜è®¤å€¼ | è¯´æ˜ |
|------|--------|------|
| `MaxLineLength` | 160 | æœ€å¤§è¡Œé•¿åº¦ |
| `MaxFileLength` | 1000 | æœ€å¤§æ–‡ä»¶é•¿åº¦ |
| `RequireFileHeader` | true | è¦æ±‚æ–‡ä»¶å¤´æ³¨é‡Š |
| `CheckTrailingWhitespace` | true | æ£€æŸ¥å°¾éšç©ºæ ¼ |

## ğŸ¯ å¯¹æ¯”æ”¹è¿›

### æ”¹è¿›å‰ï¼ˆMockAISuggestionServiceï¼‰

```csharp
// éšæœºç”Ÿæˆå»ºè®®
suggestions.Add(new AiSuggestion<T>
{
    SuggestedValue = CreateSuggestedProduct(...),
    Confidence = 0.85,  // ç¡¬ç¼–ç 
    Reasoning = "Based on market analysis..."  // ç¡¬ç¼–ç 
});
```

**é—®é¢˜**ï¼š
- âŒ æ¯æ¬¡è¿è¡Œç»“æœä¸åŒ
- âŒ æ— æ³•è¿½è¸ªå˜æ›´
- âŒ ä»£ç è´¨é‡æ— ä¿è¯
- âŒ æ— æ³•å›æ»š

### æ”¹è¿›åï¼ˆCodeGenerationServiceï¼‰

```csharp
// ç¡®å®šæ€§ç”Ÿæˆä»£ç 
var result = await service.GenerateFromYamlAsync(...);
// ç›¸åŒ YAML å§‹ç»ˆç”Ÿæˆç›¸åŒä»£ç 
// æœ‰ç‰ˆæœ¬è¿½è¸ª
// æœ‰è´¨é‡éªŒè¯
```

**ä¼˜åŠ¿**ï¼š
- âœ… ç›¸åŒè¾“å…¥äº§ç”Ÿç›¸åŒè¾“å‡º
- âœ… ç‰ˆæœ¬è¿½è¸ªå’Œå›æ»š
- âœ… è‡ªåŠ¨è´¨é‡éªŒè¯
- âœ… å˜æ›´æ£€æµ‹

## ğŸ“š è¯¦ç»†æ–‡æ¡£

å®Œæ•´çš„ä½¿ç”¨æ–‡æ¡£è¯·å‚é˜…ï¼š
- `Docs/CodeGeneration.md` - ä»£ç ç”Ÿæˆç³»ç»Ÿè¯¦ç»†æ–‡æ¡£
- `QWEN.md` - é¡¹ç›®ä¸Šä¸‹æ–‡æ–‡æ¡£ï¼ˆå·²æ›´æ–°ï¼‰

## ğŸ”§ åç»­æ”¹è¿›å»ºè®®

1. **æ·»åŠ æ›´å¤šæ¨¡æ¿** - ä¸ºä¸åŒåœºæ™¯åˆ›å»ºä¸“ç”¨æ¨¡æ¿
2. **é›†æˆçœŸå® AI** - å°† MockAISuggestionService æ›¿æ¢ä¸ºçœŸå® AI æ¨¡å‹
3. **å¢å¼ºè´¨é‡éªŒè¯** - é›†æˆå®Œæ•´çš„ Roslyn åˆ†æ
4. **æ·»åŠ æµ‹è¯•ç”Ÿæˆ** - è‡ªåŠ¨ç”Ÿæˆå®Œæ•´çš„å•å…ƒæµ‹è¯•
5. **CI/CD é›†æˆ** - åœ¨æ„å»ºç®¡é“ä¸­é›†æˆä»£ç ç”Ÿæˆ

## âœ¨ æ€»ç»“

é€šè¿‡å¼•å…¥ç¡®å®šæ€§ä»£ç ç”Ÿæˆç³»ç»Ÿï¼Œé¡¹ç›®ç°åœ¨å¯ä»¥ï¼š

1. **ä» YAML å®šä¹‰ç”Ÿæˆç¨³å®šçš„ã€å¯é‡å¤çš„ä»£ç **
2. **è¿½è¸ªæ¯æ¬¡ä»£ç ç”Ÿæˆçš„ç‰ˆæœ¬å’Œå˜æ›´**
3. **è‡ªåŠ¨éªŒè¯ç”Ÿæˆä»£ç çš„è´¨é‡**
4. **æ”¯æŒå›æ»šåˆ°å†å²ç‰ˆæœ¬**

è¿™ç¡®ä¿äº† AI ç”Ÿæˆçš„ä»£ç æ˜¯**ç¨³å®šè¿è¡Œçš„ã€ç»Ÿä¸€çš„ã€å¯ç»´æŠ¤çš„**åº”ç”¨ç¨‹åºï¼Œè€Œä¸æ˜¯æ¯æ¬¡åˆ›å»ºéšæœºçš„ä»£ç ã€‚
